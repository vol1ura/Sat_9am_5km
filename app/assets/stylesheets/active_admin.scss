@import "arctic_admin/base";

/* Fallbacks / fixes when Arctic Admin icon font fails to load
	 The screenshot shows a row of empty glyph boxes — often caused by
	 icon fonts not being served. We add safe fallbacks here:
	 - ensure icon elements don't show 'tofu' glyph boxes when font missing
	 - keep this scoped to Active Admin pages
*/

/* Avoid forcing a global font-family on <i>/.icon elements here —
	 forcing system fonts can break icon-font glyph mapping (shows empty boxes).
	 We rely on proper asset loading (font-face from Arctic Admin / Font Awesome)
	 instead. Keep only the defensive rule below that hides truly empty icon elements.
*/

/* Ensure Font Awesome and Quill styles are available for the admin editor UI.
	font-awesome is provided by the gem `font-awesome-sass` and is safe to import
	only for admin pages. Quill CSS is loaded from CDN as a fallback so toolbar
	icons / SVG styles render correctly even if vendor assets are not present.
*/
@import "font-awesome";
@import "active_admin/quill.snow";
@import "active_admin/select2.min";

/* If icon pseudo-elements are empty or render square glyphs, hide them */
.active_admin i::before,
.active_admin .icon::before {
	display: inline-block;
}

.active_admin .icon:empty,
.active_admin i:empty {
	display: none;
}

/* Quill toolbar specific adjustments to avoid theme overrides from Arctic
	 that can hide icons or squash SVGs. These rules scope to Active Admin only.
*/
.active_admin .ql-toolbar .ql-formats button svg {
	display: inline-block !important;
	width: 18px !important;
	height: 18px !important;
	vertical-align: middle;
}
.active_admin .ql-toolbar .ql-formats button {
	padding: 6px !important;
}


.active_admin form .inputs .input.boolean,
.active_admin form .input.boolean,
.active_admin .formtastic .input.boolean {
	display: flex;
	flex-direction: row;
	align-items: center;
	gap: 0.5rem;
}
.active_admin form .inputs .input.boolean label,
.active_admin form .input.boolean label,
.active_admin .formtastic .input.boolean label {
	margin: 0;
}
.active_admin form .inputs .input.boolean input[type="checkbox"],
.active_admin form .input.boolean input[type="checkbox"],
.active_admin .formtastic .input.boolean input[type="checkbox"] {
	margin: 0;

	/* slightly larger hit area */
	width: auto;
	transform: scale(1.05);
}

/* Sortable ghost: hide all cells by default in the dragged ghost and only
   show the position and athlete columns so the user sees a compact visual
   during drag instead of the whole row. This keeps times visually anchored. */
.sortable-ghost td {
	visibility: hidden;
}
.sortable-ghost td.col-position,
.sortable-ghost td.col-athlete {
	visibility: visible;
}
.drag-handle {
	cursor: move;
}

/* Arctic migration notice styling (Results editor) */
.arctic-migration-notice {
	background: #e8f5ff;
	border-left: 4px solid #1e90ff;
	padding: 8px 12px;
	margin-bottom: 12px;
	display: flex;
	gap: 10px;
	align-items: center;
	border-radius: 6px;
}
.arctic-migration-notice .arctic-badge {
	background: #1e90ff;
	color: #fff;
	padding: 4px 8px;
	border-radius: 999px;
	font-weight: 700;
	font-size: 0.8rem;
}
.arctic-migration-notice .arctic-message {
	color: #042a3a;
	font-size: 0.95rem;
}

@media (width <= 600px) {
	.arctic-migration-notice {
		padding: 8px;
		gap: 8px;
	}
	.arctic-migration-notice .arctic-message {
		font-size: 0.9rem;
	}
}

/* Mobile / narrow-screen fixes: keep admin forms readable on phones
	 - force inputs / file inputs to full width
	 - make Quill toolbar wrap and reduce button padding
	 - action buttons (create/cancel) stack / wrap nicely
	 These are conservative rules scoped under .active_admin to avoid affecting public site. */
@media (width <= 600px) {
	.active_admin .main_content,
	.active_admin .content,
	.active_admin .panel_contents {
		padding-left: 12px !important;
		padding-right: 12px !important;
	}

	.active_admin form .inputs .input,
	.active_admin .formtastic .input,
	.active_admin .input {
		width: 100% !important;
		box-sizing: border-box !important;
	}

	/* Quill toolbar: allow wrapping so buttons don't overflow the editor box */
	.active_admin .ql-toolbar .ql-formats {
		display: flex !important;
		flex-wrap: wrap !important;
		gap: 4px !important;
	}
	.active_admin .ql-toolbar button {
		padding: 4px !important;
		min-width: 32px !important;
	}

	/* File inputs tend to be inline; make them block and full width */
	.active_admin input[type="file"],
	.active_admin .fileinput,
	.active_admin .file-field {
		display: block !important;
		width: 100% !important;
	}

	/* Action buttons at bottom: allow wrap and accessible hit areas */
	.active_admin .actions,
	.active_admin .form-actions {
		display: flex !important;
		flex-wrap: wrap !important;
		gap: 8px !important;
		justify-content: flex-start !important;
	}
	.active_admin .actions .button,
	.active_admin .form-actions .button,
	.active_admin .actions .btn,
	.active_admin .form-actions .btn {
		flex: 0 0 auto !important;
		padding: .45rem .9rem !important;
	}

	/* Ensure panels and footers don't cause horizontal scroll */
	.active_admin .panel,
	.active_admin .panel_contents,
	.active_admin .footer,
	.active_admin .tabs,
	.active_admin .table_tools {
		overflow-x: visible !important;
		word-break: break-all !important;
	}
}
