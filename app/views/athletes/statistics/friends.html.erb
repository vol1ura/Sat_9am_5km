<%= turbo_frame_tag 'friends' do %>
  <h2 class="accordion-header" id="flush-friends">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseFriends" aria-expanded="false" aria-controls="flush-collapseFriends">
      <span class="badge text-light bg-primary me-3" id="friends-counter"><%= @athlete.friends.size %></span>
      <%= t 'athletes.show.friends' %>
    </button>
  </h2>
  <div id="flush-collapseFriends" class="accordion-collapse collapse" aria-labelledby="flush-friends" data-bs-parent="#accordionPersonalBest">
    <div class="accordion-body">
      <div class="list-group list-group-flush" id="friends">
        <%=
          render(
            partial: 'friendships/friend',
            collection: @athlete.friends.includes(:going_to_event, user: { image_attachment: :blob }).order(:name),
            locals: { is_friends_tab: true },
          )
        %>
      </div>
    </div>
  </div>
<% end %>
