# frozen_string_literal: true

active_admin_form_for [:admin, resource] do |f|
  f.inputs 'Координаты и временная зона' do
    input :latitude
    input :longitude
    input(
      :timezone,
      as: :searchable_select,
      include_blank: false,
      collection:
        ActiveSupport::TimeZone.all.map { |tz| ["#{tz.tzinfo.name} (UTC#{tz.formatted_offset})", tz.tzinfo.name] },
    )
  end

  f.inputs 'Основные параметры' do
    input :active, input_html: { style: 'margin-bottom: 20px;' }
    input :country, include_blank: false
    input :name
    input :code_name if resource.new_record? || current_user.super_admin?
    input :town
    input :place
    input :place_description
    input(
      :description,
      as: :quill_editor,
      input_html: {
        data: {
          options: {
            modules: {
              toolbar: [
                %w[bold italic strike],
                %w[blockquote code-block],
                [{ list: 'ordered' }],
                ['link'],
                ['clean'],
              ],
            },
            placeholder: 'Описать кто и где проводит, особенности.',
            theme: 'snow',
          },
        },
      },
    )
    input :visible_order, input_html: { inputmode: 'numeric' }
    input :summer_image, as: :file, hint:
      if resource.summer_image.attached? && resource.summer_image.blob.persisted?
        image_tag resource.summer_image.variant(:thumb), class: 'img-badge'
      end
    input :winter_image, as: :file, hint:
      if resource.winter_image.attached? && resource.winter_image.blob.persisted?
        image_tag resource.winter_image.variant(:thumb), class: 'img-badge'
      end
  end

  f.actions
end
