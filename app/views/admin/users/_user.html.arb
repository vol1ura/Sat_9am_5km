# frozen_string_literal: true

attributes_table_for user do
  row :first_name
  row :last_name
  row :email
  row(:telegram_user) { |user| telegram_link user }
  row :role
  row :note if current_user.admin?
  row :created_at
  row('Номер паркран') { |u| u.athlete&.parkrun_code }
  row('Номер 5 вёрст или RunPark') { |u| u.athlete&.fiveverst_code }
  row('Пол') { |u| u.athlete&.gender }
  row('Клуб') { |u| u.athlete&.club&.name }
  row :athlete
end

panel 'Правки' do
  table_for user.own_and_associated_audits.includes(:user, :auditable).reorder(created_at: :desc) do
    column :auditable
    column :audited_changes
    column :version
    column :user
    column :created_at
  end
end
